import{f as b}from"./chunk-LPEZ3JC5.js";import{b as v}from"./chunk-TS7RBXCZ.js";import{C as a,eb as u,h as n,j as o,k as f,t as p,x as g,z as m}from"./chunk-OXMZZWT6.js";var h=class l{constructor(t,r,i){this.httpClient=t;this.baseUrlService=r;this.languageService=i;this.briefArticles$=null;this.articles=new Map}get baseUrl(){return`${this.baseUrlService.getBaseUrl()}/metadata`}getCategories(t,r=0){let i=new Map;return t.forEach(e=>{e.categories.forEach(s=>{let c=i.get(s);c?i.set(s,c+1):i.set(s,1)})}),Array.from(i).sort(([,e],[,s])=>s-e).filter(([,e])=>e>r).map(([e])=>e)}list(){if(this.briefArticles$)return this.briefArticles$;{let t=this.httpClient.get(`${this.baseUrl}/articles/list.json`);return this.briefArticles$=f([t,this.languageService.languageChanged()]).pipe(o(([r,i])=>r.filter(e=>!e.languages||e.languages.includes(i))),p(1)),this.briefArticles$}}get(t){let r=this.articles.get(t);return r?n(r):this.httpClient.get(`${this.baseUrl}/articles/${t}.json`).pipe(g(i=>{this.articles.set(t,i)}))}static{this.\u0275fac=function(r){return new(r||l)(a(u),a(v),a(b))}}static{this.\u0275prov=m({token:l,factory:l.\u0275fac,providedIn:"root"})}};export{h as a};
